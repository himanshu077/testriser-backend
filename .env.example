# ==========================================
# Testriser - Backend Configuration
# ==========================================
# Copy this file to .env and update values
# For production, use strong secrets!

# Environment
NODE_ENV=development
PORT=5000

# Database
# Local PostgreSQL: postgresql://postgres:postgres@localhost:5432/testriser
# Supabase (Pooler - for app runtime): postgresql://postgres.[PROJECT_ID]:[PASSWORD]@aws-0-[REGION].pooler.supabase.com:5432/postgres
# Supabase (Direct - for migrations): postgresql://postgres.[PROJECT_ID]:[PASSWORD]@aws-0-[REGION].pooler.supabase.com:6543/postgres
#
# IMPORTANT: URL encode special characters in password
#   @ becomes %40
#   # becomes %23
#   $ becomes %24
#   & becomes %26
#   + becomes %2B
#
# Example: Password "Test@123#" becomes "Test%40123%23"
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/testriser"

# JWT Authentication
# Generate secure secret: openssl rand -hex 64
JWT_SECRET="your-jwt-secret-change-in-production-use-openssl-rand-hex-64"
JWT_EXPIRES_IN="7d"

# CORS - Frontend URL
# Development: http://localhost:3000
# Production (EC2): http://3.137.53.219
# Production (Domain): https://smartcontact.ai (when you add domain)
FRONTEND_URL="http://localhost:3000"

# Backend URL (for Swagger API docs server selection)
# This is where Swagger UI will make test requests to the API
#
# LOCAL Development:
#   BACKEND_URL="http://localhost:5000"
#   - Backend runs on port 5000
#   - Swagger makes requests directly to localhost:5000
#   - Frontend also makes requests to localhost:5000
#   - Both use same URL because backend is directly accessible
#
# PRODUCTION (EC2 with Nginx):
#   BACKEND_URL="http://3.137.53.219/api"
#   - Nginx runs on port 80
#   - Swagger is served at http://3.137.53.219/api-docs (through Nginx)
#   - Swagger needs /api prefix to make requests through Nginx
#   - Nginx proxies /api/* to backend on port 5000
#
# PRODUCTION (with domain):
#   BACKEND_URL="https://api.testriser.com"
BACKEND_URL="http://localhost:5000"

# ==========================================
# PWA - Push Notifications Configuration
# ==========================================
# Generate VAPID keys using: npx web-push generate-vapid-keys
# Run this command once and copy the keys here
#
# VAPID (Voluntary Application Server Identification) keys are required
# for web push notifications to work. Each application needs unique keys.

# Public key (safe to expose in client-side code)
# This should match NEXT_PUBLIC_VAPID_PUBLIC_KEY in frontend/.env.local
VAPID_PUBLIC_KEY="your-vapid-public-key-here"

# Private key (KEEP SECRET - never commit to git or expose)
VAPID_PRIVATE_KEY="your-vapid-private-key-here"

# Subject (your email or website URL for push notification service)
# Format: mailto:your-email@domain.com
VAPID_SUBJECT="mailto:admin@testriser.com"

# ==========================================
# Firebase Admin SDK Configuration
# ==========================================
# Required for Firebase authentication (phone, Google, email OTP)
# Get these from Firebase Console > Project Settings > Service Accounts
# Method 1: Generate new private key (download JSON file)
# Method 2: Use individual environment variables (shown below)
#
# To get these values:
# 1. Go to https://console.firebase.google.com/
# 2. Select your project (marksriser-9323b)
# 3. Go to Project Settings (gear icon) > Service Accounts
# 4. Click "Generate New Private Key" and download the JSON file
# 5. Extract the values from the JSON file:
#    - project_id → FIREBASE_PROJECT_ID
#    - client_email → FIREBASE_CLIENT_EMAIL
#    - private_key → FIREBASE_PRIVATE_KEY (keep the \n characters)

FIREBASE_PROJECT_ID="marksriser-9323b"
FIREBASE_CLIENT_EMAIL="firebase-adminsdk-xxxxx@marksriser-9323b.iam.gserviceaccount.com"
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYour-Private-Key-Here\n-----END PRIVATE KEY-----\n"

# Alternative: Path to service account JSON file
# FIREBASE_SERVICE_ACCOUNT_PATH="./firebase-service-account.json"

# ==========================================
# OpenAI API Configuration (for AI Bot)
# ==========================================
# Get API key from: https://platform.openai.com/api-keys
# Free tier: $5 trial credit
# Pay-as-you-go: https://platform.openai.com/account/billing
OPENAI_API_KEY="sk-your-openai-api-key-here"

# Model configuration
OPENAI_MODEL_GPT4="gpt-4-turbo"
OPENAI_MODEL_GPT35="gpt-3.5-turbo"

# Response configuration
OPENAI_MAX_TOKENS="1000"
OPENAI_TEMPERATURE="0.7"
